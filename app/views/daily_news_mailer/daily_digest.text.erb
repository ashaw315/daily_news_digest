Daily News Digest - <%= Date.today.strftime('%B %d, %Y') %>

Hello <%= @user.name || @user.email.split('@').first %>!

Here's your personalized news digest based on your selected news sources.

<% if defined?(@sorted_topics) && @sorted_topics.present? %>
<% @sorted_topics.each do |topic| %>
<%= topic.upcase %> NEWS:
<% @articles_by_topic[topic].each do |article| %>
- <%= article.title %>
  <%= truncate(article.description, length: 100) %>
  <%= article.source %> | <%= article.published_at.strftime('%b %d, %Y') %>
  Read more: <%= article.url %>
<% end %>
<% end %>
<% end %>

---
Manage Preferences: <%= edit_preferences_url %>
Unsubscribe: <%= unsubscribe_url(token: @user.unsubscribe_token) %>

Â© <%= Date.today.year %> Your News App. All rights reserved.