Weekly News Digest - <%= Date.today.strftime('%B %d, %Y') %>

Hello <%= @user.name || @user.email.split('@').first %>!

Here's your weekly news digest based on your preferences.

WEEKLY NEWS BRIEF:
<% @news_brief.each do |article| %>
* <%= article.title %> - <%= article.source %>
<% end %>

YOUR TOPICS:
<% @topics.each do |topic| %>
* <%= topic.capitalize %>
<% end %>

TOP ARTICLES THIS WEEK:
<% @top_articles.each do |article| %>
- <%= article.title %>
  <%= truncate(article.description, length: 100) %>
  <%= article.source %> | <%= article.published_at.strftime('%b %d, %Y') %>
  Read more: <%= article.url %>

<% end %>

<% @articles_by_topic.each do |topic, articles| %>
<%= topic.upcase %> NEWS:
<% articles.first(5).each do |article| %>
- <%= article.title %>
  <%= truncate(article.description, length: 100) %>
  <%= article.source %> | <%= article.published_at.strftime('%b %d, %Y') %>
  Read more: <%= article.url %>

<% end %>
<% end %>

---
Manage Preferences: <%= edit_preferences_url %>
Unsubscribe: <%= unsubscribe_url(token: @user.unsubscribe_token) %>

Â© <%= Date.today.year %> Your News App. All rights reserved. 